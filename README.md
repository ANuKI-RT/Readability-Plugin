# Integration with AENEAS Data Provider

## Requirements
AENEAS Data Provider (CppReadDP.jar) is a Java command line tool and requires a Java 8 JRE and the python project cpp-readability (link via path to cli.py as explained below). 

## Getting started

Create virtual environment and install dependencies
```shell
python -m venv venv
./venv/bin/pip install -r requirements.txt
```

Create a configuration file named **CppRead_DP.config**. 
Below is an example of **CppRead_DP.config** file.
```ini
# (temporary) work directory - must exist (i.e. is not created automatically)
cppReadDP.workD		= ./CppReadWork/

# flag whether file and routine names shall be anoynmized
cppReadDP.anonymizeNames = false

# flag whether routines shall be included in the metric output
cppReadDP.includeRoutines = true

# path to the python interpreter
cppReadDP.exe_Python = ./venv/bin/python

# path to the readability metric python tool
cppReadDP.script_Python = ./readability_for_c/cli.py

cppReadDP.command_options = extract-readability

# flag whether temporary files in the work directory shall be removed again. use 'false' only for debugging.
cppReadDP.cleanWorkDir = false
```

Adapt _cppReadDP.exe_Python_ to your python interpreter 
and _cppReadDP.script_Python_ to our _cli.py_ script.
_cppReadDP.workD_ is a directory that contains files generated by AENEAS data provider during running.
_cppReadDP.workD_ directory should exist before running.

Run the AENEAS Data Provider as following from a terminal:
```shell
java -jar <path-to-CppReadDP.jar> UNIP.CPPREAD <config-dir> <output-dir> <src-dir>
```

- _path-to-CppReadDP.jar_ is the path to AENEAS Data Provider jar file (CppReadDP.jar).
- _config-dir_ is the path to the directory contains config file CppRead_DP.config
- _output-dir_ is the path to the directory contains output XML file (UNIP.CPPREAD_Readability_for_C++.xml). 
This directory should exist before running
- _src-dir_ is the path to the C++ project that you want to extract code snippets and calculate their readability.

## Modify Demonstrator

Please refer to the `readme_aeneas_dump.txt` and the file `ANE-OHB-aeneas-repo-r1-r1024.dump` for accessing the code behind the `CppReadDP.jar`.